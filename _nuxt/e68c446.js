(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{390:function(t,e,n){var content=n(395);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(68).default)("b4e32adc",content,!0,{sourceMap:!1})},393:function(t,e,n){"use strict";n.r(e);n(21),n(13),n(16);var r=n(24),o=(n(59),n(77),n(1),n(2),function t(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;var e,i,n;if(Array.isArray(a)){if((e=a.length)!=b.length)return!1;for(i=e;0!=i--;)if(!t(a[i],b[i]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();if((e=(n=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(i=e;0!=i--;)if(!Object.prototype.hasOwnProperty.call(b,n[i]))return!1;for(i=e;0!=i--;){var r=n[i];if(!t(a[r],b[r]))return!1}return!0}return a!=a&&b!=b});const c="__googleMapsScriptId";var l;!function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"}(l||(l={}));class h{constructor({apiKey:t,authReferrerPolicy:e,channel:n,client:r,id:l=c,language:d,libraries:f=[],mapIds:v,nonce:m,region:y,retries:k=3,url:_="https://maps.googleapis.com/maps/api/js",version:x}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=e,this.channel=n,this.client=r,this.id=l||c,this.language=d,this.libraries=f,this.mapIds=v,this.nonce=m,this.region=y,this.retries=k,this.url=_,this.version=x,h.instance){if(!o(this.options,h.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(h.instance.options)}`);return h.instance}h.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?l.FAILURE:this.done?l.SUCCESS:this.loading?l.LOADING:l.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const script=document.getElementById(this.id);script&&script.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise(((t,e)=>{this.loadCallback((n=>{n?e(n.error):t(window.google)}))}))}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),script=document.createElement("script");script.id=this.id,script.type="text/javascript",script.src=t,script.onerror=this.loadErrorCallback.bind(this),script.defer=!0,script.async=!0,this.nonce&&(script.nonce=this.nonce),document.head.appendChild(script)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout((()=>{this.deleteScript(),this.setScript()}),t)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((t=>{t(this.onerrorEvent)})),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var d={data:function(){return{center:{lat:43.6532,lng:-79.3832},latestLocation:null,locations:[],currentPage:1,pageSize:10,currentLocation:null,error:null,searchQuery:""}},computed:{startIndex:function(){return(this.currentPage-1)*this.pageSize},endIndex:function(){return this.startIndex+this.pageSize-1},displayedLocations:function(){return this.locations.slice(this.startIndex,this.endIndex+1)},totalPages:function(){var t=Math.ceil(this.locations.length/this.pageSize);return 0===t?1:t}},methods:{mounted:function(){this.loadGoogleMaps()},sortByTimeAdded:function(){this.locations=this.locations.sort((function(a,b){return a.timeAdded>b.timeAdded?1:-1}))},sortByName:function(){this.locations=this.locations.sort((function(a,b){return a.name>b.name?1:-1}))},sortByLat:function(){this.locations=this.locations.sort((function(a,b){return a.position.latitude>b.position.latitude?1:-1}))},sortByLon:function(){this.locations=this.locations.sort((function(a,b){return a.position.longitude>b.position.longitude?1:-1}))},setLatestLocation:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getTimeZone(t.lat,t.lng);case 2:"Error"!==(r=n.sent)&&(o=(new Date).toLocaleString("en-US",{timeZone:r}),e.latestLocation={name:t.name,timeZone:r,localTime:o});case 4:case"end":return n.stop()}}),n)})))()},getTimeZone:function(t,e){return Object(r.a)(regeneratorRuntime.mark((function n(){var r,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("https://maps.googleapis.com/maps/api/timezone/json?location=".concat(t,",").concat(e,"&timestamp=").concat(Math.floor(Date.now()/1e3),"&key=").concat("AIzaSyDjdV39c1-YBbIPfhRtjNvxYny9_sfsF30"));case 3:return r=n.sent,n.next=6,r.json();case 6:return data=n.sent,n.abrupt("return",data.timeZoneId);case 10:return n.prev=10,n.t0=n.catch(0),console.error("Error retrieving time zone:",n.t0),n.abrupt("return","Error");case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))()},getLocation:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.handleSuccess,this.handleError):this.error="Geolocation is not supported by this browser."},handleSuccess:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.coords.latitude,o=t.coords.longitude,e.currentLocation="Latitude: ".concat(r,", Longitude: ").concat(o),c={lat:r,lng:o},e.updateMapCenter(c),l={timeAdded:new Date,checked:!1,id:1,name:"Current Location",position:{lat:r,lng:o}},e.checkDuplicate(l)){n.next=9;break}return n.next=9,e.locations.push(l);case 9:return n.next=11,e.$refs.gMap.initChildren();case 11:return n.next=13,e.setLatestLocation({name:"Current Location",lat:r,lng:o});case 13:case"end":return n.stop()}}),n)})))()},handleError:function(t){switch(t.code){case t.PERMISSION_DENIED:this.error="User denied the request for Geolocation.";break;case t.POSITION_UNAVAILABLE:this.error="Location information is unavailable.";break;case t.TIMEOUT:this.error="The request to get user location timed out.";break;case t.UNKNOWN_ERROR:this.error="An unknown error occurred."}},loadGoogleMaps:function(){return Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new h({apiKey:"AIzaSyDjdV39c1-YBbIPfhRtjNvxYny9_sfsF30",version:"weekly",libraries:["places"]}),t.prev=1,t.next=4,e.load();case 4:console.info("Google Maps API loaded successfully"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error("Error loading Google Maps API:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()},searchLocation:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new google.maps.Geocoder,e.next=4,n.geocode({address:t.searchQuery},function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n,r){var o,c,l,h,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("OK"!==r){e.next=15;break}if(!(n&&n.length>0)){e.next=13;break}if(o=n[0],c=o.place_id,l=o.geometry.location.lat(),h=o.geometry.location.lng(),d={timeAdded:new Date,checked:!1,id:c,name:t.searchQuery,position:{lat:l,lng:h}},t.checkDuplicate(d)){e.next=10;break}return e.next=10,t.locations.push(d);case 10:return t.updateMapCenter({lat:l,lng:h}),e.next=13,t.setLatestLocation({name:t.searchQuery,lat:l,lng:h});case 13:e.next=17;break;case 15:console.error("No locations found:",r),alert("Location query failed: "+r);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},deleteLocations:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.locations=t.locations.filter((function(t){return!t.checked})),e.next=3,t.$nextTick();case 3:return e.next=5,t.$refs.gMap.initMap();case 5:case"end":return e.stop()}}),e)})))()},updateMapCenter:function(t){var e=this;this.center=t,this.$nextTick((function(){e.$refs.gMap.initMap()}))},checkDuplicate:function(t){return this.locations.some((function(e){return e.id===t.id}))},autoHighlightInput:function(){this.$refs.textInput.select()},nextPage:function(){this.currentPage<this.totalPages&&this.currentPage++},previousPage:function(){this.currentPage>1&&this.currentPage--}}},f=d,v=(n(394),n(46)),component=Object(v.a)(f,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"container"},[e("h1",[t._v("NUXT Google Maps")]),t._v(" "),e("div",{staticClass:"location"},[e("button",{staticClass:"input-group-text",on:{click:t.getLocation}},[t._v("\n        Get Current Location\n      ")]),t._v(" "),t.error?e("p",{staticClass:"error"},[t._v(t._s(t.error))]):t.currentLocation?e("p",{staticClass:"current-location"},[t._v("\n        "+t._s(t.currentLocation)+"\n      ")]):t._e()]),t._v(" "),e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],ref:"textInput",staticClass:"form-control",attrs:{id:"autocomplete-input",type:"text",placeholder:"Search Location"},domProps:{value:t.searchQuery},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchLocation.apply(null,arguments)},click:t.autoHighlightInput,input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),t._v(" "),e("button",{staticClass:"input-group-text",on:{click:t.searchLocation}},[e("i",{staticClass:"bi bi-search"})])])]),t._v(" "),e("GMap",{ref:"gMap",staticClass:"map",attrs:{language:"en",center:t.center,options:{fullscreenControl:!0},zoom:8}},t._l(t.locations,(function(n){return e("GMapMarker",{key:n.id,attrs:{position:{lat:n.position.lat,lng:n.position.lng}}},[e("GMapInfoWindow",{attrs:{options:{maxWidth:200}}},[e("code",[t._v("\n          name: "+t._s(n.name)+", lat: "+t._s(n.position.lat)+", lng:\n          "+t._s(n.position.lng)+"\n        ")])])],1)})),1),t._v(" "),e("div",{staticClass:"info"},[t.latestLocation?e("div",[e("div",[t._v("Latest Location: "+t._s(t.latestLocation.name))]),t._v(" "),e("div",[t._v("Time Zone: "+t._s(t.latestLocation.timeZone))]),t._v(" "),e("div",[t._v("Local Time: "+t._s(t.latestLocation.localTime))])]):t._e(),t._v(" "),e("div",{staticClass:"table-top-row"},[e("div",{staticClass:"table-controls"},[e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Sorting Options"}},[e("button",{staticClass:"btn btn-primary text-white",attrs:{type:"button"},on:{click:t.sortByTimeAdded}},[e("i",{staticClass:"bi bi-clock"}),t._v("Time\n          ")]),t._v(" "),e("button",{staticClass:"btn btn-primary text-white",attrs:{type:"button"},on:{click:t.sortByName}},[e("i",{staticClass:"bi bi-sort-alpha-down"}),t._v("Name\n          ")]),t._v(" "),e("button",{staticClass:"btn btn-primary text-white",attrs:{type:"button"},on:{click:t.sortByLat}},[e("i",{staticClass:"bi bi-geo-alt"}),t._v("Lat\n          ")]),t._v(" "),e("button",{staticClass:"btn btn-primary text-white",attrs:{type:"button"},on:{click:t.sortByLon}},[e("i",{staticClass:"bi bi-geo-alt"}),t._v("Long\n          ")])]),t._v(" "),e("div",[e("div",{staticClass:"pagination",attrs:{role:"group"}},[e("li",{staticClass:"page-item",class:{disabled:1===t.currentPage}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){t.currentPage-=1}}},[t._v("Previous")])]),t._v(" "),t._l(t.totalPages,(function(n){return e("li",{key:n,staticClass:"page-item",class:{active:n===t.currentPage}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){t.currentPage=n}}},[t._v(t._s(n))])])})),t._v(" "),e("li",{staticClass:"page-item",class:{disabled:t.currentPage===t.totalPages}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){t.currentPage+=1}}},[t._v("Next")])])],2)])]),t._v(" "),e("button",{on:{click:t.deleteLocations}},[t._v("Delete Selected Locations")])]),t._v(" "),e("table",{staticClass:"table"},[t._m(0),t._v(" "),e("tbody",t._l(t.displayedLocations,(function(n){return e("tr",{key:n.id},[e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.checked,expression:"location.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(n.checked)?t._i(n.checked,null)>-1:n.checked},on:{change:function(e){var r=n.checked,o=e.target,c=!!o.checked;if(Array.isArray(r)){var l=t._i(r,null);o.checked?l<0&&t.$set(n,"checked",r.concat([null])):l>-1&&t.$set(n,"checked",r.slice(0,l).concat(r.slice(l+1)))}else t.$set(n,"checked",c)}}})]),t._v(" "),e("td",{staticClass:"clickable-cell",on:{click:function(e){return t.updateMapCenter({lat:n.position.lat,lng:n.position.lng})}}},[t._v("\n            "+t._s(n.name)+"\n          ")]),t._v(" "),e("td",[t._v(t._s(n.position.lat))]),t._v(" "),e("td",[t._v(t._s(n.position.lng))])])})),0)])])],1)}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th"),t._v(" "),e("th",[t._v("Name")]),t._v(" "),e("th",[t._v("Latitude")]),t._v(" "),e("th",[t._v("Longitude")])])])}],!1,null,null,null);e.default=component.exports},394:function(t,e,n){"use strict";n(390)},395:function(t,e,n){var r=n(67)((function(i){return i[1]}));r.push([t.i,".container{display:flex;flex-direction:column;gap:5px;padding:1rem}.location{align-items:center;display:flex;flex-direction:row;gap:1rem}.current-location,.error{margin:0}.map{width:100vw}.input-group{width:20rem}.clickable-cell{cursor:pointer}.info{padding:1rem}.table-top-row{flex-direction:row-reverse;justify-content:space-between}.table-controls,.table-top-row{align-items:center;display:flex}.table-controls{flex-direction:row;gap:.5rem}",""]),r.locals={},t.exports=r}}]);